import{aN as L,aO as ue,aP as Ye,aQ as Qt,aR as Zt,aS as ga,aT as Lt,aU as ya,c as M,z as Ut,r as X,a6 as Ma,w as me,h as f,W as Ae,A as zt,g as pt,O as Dt,Q as le,a7 as pa,ab as et,_ as Da,m as ba,l as Ct,o as wa,n as _a,p as Sa,q as ee,f as z,v as ct,s as vt,x as ka,t as qa,u as Ca}from"./index.946ad941.js";import{u as Rt,a as Xt,Q as Ya}from"./QPageContainer.bca18837.js";import{u as Ha,Q as ft}from"./QPopupProxy.6689a331.js";import{u as Kt,c as Wt,b as Jt,Q as Ia,a as mt}from"./QForm.7f455822.js";import{p as V}from"./focus-manager.41046903.js";import{T as Va}from"./QMenu.efd99fee.js";import{r as wt,t as at,f as We,i as ht,b as qe,g as Yt,c as Ht,d as Oa,e as xa,h as Ta,l as Fa,Q as $a}from"./index.27a39792.js";import{C as gt}from"./ClosePopup.2a6f0d45.js";import{u as ja}from"./vue-i18n.runtime.esm-bundler.fe6c5ac9.js";import{u as Aa}from"./use-practices.17bbda0f.js";import"./use-transition.0600edad.js";function _t(e,a){switch(e){case 0:return function(){return a.apply(this,arguments)};case 1:return function(r){return a.apply(this,arguments)};case 2:return function(r,l){return a.apply(this,arguments)};case 3:return function(r,l,s){return a.apply(this,arguments)};case 4:return function(r,l,s,o){return a.apply(this,arguments)};case 5:return function(r,l,s,o,d){return a.apply(this,arguments)};case 6:return function(r,l,s,o,d,c){return a.apply(this,arguments)};case 7:return function(r,l,s,o,d,c,D){return a.apply(this,arguments)};case 8:return function(r,l,s,o,d,c,D,k){return a.apply(this,arguments)};case 9:return function(r,l,s,o,d,c,D,k,h){return a.apply(this,arguments)};case 10:return function(r,l,s,o,d,c,D,k,h,S){return a.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Gt(e,a,r){return function(){for(var l=[],s=0,o=e,d=0;d<a.length||s<arguments.length;){var c;d<a.length&&(!L(a[d])||s>=arguments.length)?c=a[d]:(c=arguments[s],s+=1),l[d]=c,L(c)||(o-=1),d+=1}return o<=0?r.apply(this,l):_t(o,Gt(e,l,r))}}var Na=ue(function(a,r){return a===1?Ye(r):_t(a,Gt(a,[],r))}),ea=Na;function Pa(e){return function a(r,l,s){switch(arguments.length){case 0:return a;case 1:return L(r)?a:ue(function(o,d){return e(r,o,d)});case 2:return L(r)&&L(l)?a:L(r)?ue(function(o,d){return e(o,l,d)}):L(l)?ue(function(o,d){return e(r,o,d)}):Ye(function(o){return e(r,l,o)});default:return L(r)&&L(l)&&L(s)?a:L(r)&&L(l)?ue(function(o,d){return e(o,d,s)}):L(r)&&L(s)?ue(function(o,d){return e(o,l,d)}):L(l)&&L(s)?ue(function(o,d){return e(r,o,d)}):L(r)?Ye(function(o){return e(o,l,s)}):L(l)?Ye(function(o){return e(r,o,s)}):L(s)?Ye(function(o){return e(r,l,o)}):e(r,l,s)}}}function Ba(e){return e!=null&&typeof e["@@transducer/step"]=="function"}function Ea(e,a,r){return function(){if(arguments.length===0)return r();var l=arguments[arguments.length-1];if(!Qt(l)){for(var s=0;s<e.length;){if(typeof l[e[s]]=="function")return l[e[s]].apply(l,Array.prototype.slice.call(arguments,0,-1));s+=1}if(Ba(l)){var o=a.apply(null,Array.prototype.slice.call(arguments,0,-1));return o(l)}}return r.apply(this,arguments)}}var It={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}},Qa=ue(function(a,r){return r>a?r:a}),Za=Qa;function La(e,a){for(var r=0,l=a.length,s=Array(l);r<l;)s[r]=e(a[r]),r+=1;return s}var Ua=Ye(function(a){return Qt(a)?!0:!a||typeof a!="object"||Zt(a)?!1:a.length===0?!0:a.length>0?a.hasOwnProperty(0)&&a.hasOwnProperty(a.length-1):!1}),za=Ua,Ra=function(){function e(a){this.f=a}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(a){return a},e.prototype["@@transducer/step"]=function(a,r){return this.f(a,r)},e}();function Xa(e){return new Ra(e)}var Ka=ue(function(a,r){return _t(a.length,function(){return a.apply(r,arguments)})}),Wa=Ka;function Ja(e,a,r){for(var l=0,s=r.length;l<s;){if(a=e["@@transducer/step"](a,r[l]),a&&a["@@transducer/reduced"]){a=a["@@transducer/value"];break}l+=1}return e["@@transducer/result"](a)}function Vt(e,a,r){for(var l=r.next();!l.done;){if(a=e["@@transducer/step"](a,l.value),a&&a["@@transducer/reduced"]){a=a["@@transducer/value"];break}l=r.next()}return e["@@transducer/result"](a)}function Ot(e,a,r,l){return e["@@transducer/result"](r[l](Wa(e["@@transducer/step"],e),a))}var xt=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator";function ta(e,a,r){if(typeof e=="function"&&(e=Xa(e)),za(r))return Ja(e,a,r);if(typeof r["fantasy-land/reduce"]=="function")return Ot(e,a,r,"fantasy-land/reduce");if(r[xt]!=null)return Vt(e,a,r[xt]());if(typeof r.next=="function")return Vt(e,a,r);if(typeof r.reduce=="function")return Ot(e,a,r,"reduce");throw new TypeError("reduce: list must be array or iterable")}var Ga=function(){function e(a,r){this.xf=r,this.f=a}return e.prototype["@@transducer/init"]=It.init,e.prototype["@@transducer/result"]=It.result,e.prototype["@@transducer/step"]=function(a,r){return this.xf["@@transducer/step"](a,this.f(r))},e}(),en=ue(function(a,r){return new Ga(a,r)}),tn=en,an=ue(Ea(["fantasy-land/map","map"],tn,function(a,r){switch(Object.prototype.toString.call(r)){case"[object Function]":return ea(r.length,function(){return a.call(this,r.apply(this,arguments))});case"[object Object]":return ta(function(l,s){return l[s]=a(r[s]),l},{},ga(r));default:return La(a,r)}})),nn=an,rn=Number.isInteger||function(a){return a<<0===a},ln=ue(function(a,r){var l=a<0?r.length+a:a;return Zt(r)?r.charAt(l):r[l]}),un=ln,on=ue(function(a,r){if(r!=null)return rn(a)?un(a,r):r[a]}),sn=on,dn=ue(function(a,r){return nn(sn(a),r)}),cn=dn,vn=Pa(ta),fn=vn,mn=Ye(function(a){return ea(fn(Za,0,cn("length",a)),function(){for(var r=0,l=a.length;r<l;){if(!a[r].apply(this,arguments))return!1;r+=1}return!0})}),Tt=mn;const be=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function hn(e,a,r){return Object.prototype.toString.call(e)==="[object Date]"&&(r=e.getDate(),a=e.getMonth()+1,e=e.getFullYear()),pn(St(e,a,r))}function Ft(e,a,r){return na(Mn(e,a,r))}function gn(e){return yn(e)===0}function tt(e,a){return a<=6?31:a<=11||gn(e)?30:29}function yn(e){const a=be.length;let r=be[0],l,s,o,d,c;if(e<r||e>=be[a-1])throw new Error("Invalid Jalaali year "+e);for(c=1;c<a&&(l=be[c],s=l-r,!(e<l));c+=1)r=l;return d=e-r,s-d<6&&(d=d-s+j(s+4,33)*33),o=ie(ie(d+1,33)-1,4),o===-1&&(o=4),o}function aa(e,a){const r=be.length,l=e+621;let s=-14,o=be[0],d,c,D,k,h;if(e<o||e>=be[r-1])throw new Error("Invalid Jalaali year "+e);for(h=1;h<r&&(d=be[h],c=d-o,!(e<d));h+=1)s=s+j(c,33)*8+j(ie(c,33),4),o=d;k=e-o,s=s+j(k,33)*8+j(ie(k,33)+3,4),ie(c,33)===4&&c-k===4&&(s+=1);const S=j(l,4)-j((j(l,100)+1)*3,4)-150,K=20+s-S;return a||(c-k<6&&(k=k-c+j(c+4,33)*33),D=ie(ie(k+1,33)-1,4),D===-1&&(D=4)),{leap:D,gy:l,march:K}}function Mn(e,a,r){const l=aa(e,!0);return St(l.gy,3,l.march)+(a-1)*31-j(a,7)*(a-7)+r-1}function pn(e){const a=na(e).gy;let r=a-621,l,s,o;const d=aa(r,!1),c=St(a,3,d.march);if(o=e-c,o>=0){if(o<=185)return s=1+j(o,31),l=ie(o,31)+1,{jy:r,jm:s,jd:l};o-=186}else r-=1,o+=179,d.leap===1&&(o+=1);return s=7+j(o,30),l=ie(o,30)+1,{jy:r,jm:s,jd:l}}function St(e,a,r){let l=j((e+j(a-8,6)+100100)*1461,4)+j(153*ie(a+9,12)+2,5)+r-34840408;return l=l-j(j(e+100100+j(a-8,6),100)*3,4)+752,l}function na(e){let a=4*e+139361631;a=a+j(j(4*e+183187720,146097)*3,4)*4-3908;const r=j(ie(a,1461),4)*5+308,l=j(ie(r,153),5)+1,s=ie(j(r,153),12)+1;return{gy:j(a,1461)-100100+j(8-s,6),gm:s,gd:l}}function j(e,a){return~~(e/a)}function ie(e,a){return e-~~(e/a)*a}const ra=864e5,Dn=36e5,bt=6e4,la="YYYY-MM-DDTHH:mm:ss.SSSZ",bn=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,wn=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,yt={};function _n(e,a){const r="("+a.days.join("|")+")",l=e+r;if(yt[l]!==void 0)return yt[l];const s="("+a.daysShort.join("|")+")",o="("+a.months.join("|")+")",d="("+a.monthsShort.join("|")+")",c={};let D=0;const k=e.replace(wn,S=>{switch(D++,S){case"YY":return c.YY=D,"(-?\\d{1,2})";case"YYYY":return c.YYYY=D,"(-?\\d{1,4})";case"M":return c.M=D,"(\\d{1,2})";case"MM":return c.M=D,"(\\d{2})";case"MMM":return c.MMM=D,d;case"MMMM":return c.MMMM=D,o;case"D":return c.D=D,"(\\d{1,2})";case"Do":return c.D=D++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return c.D=D,"(\\d{2})";case"H":return c.H=D,"(\\d{1,2})";case"HH":return c.H=D,"(\\d{2})";case"h":return c.h=D,"(\\d{1,2})";case"hh":return c.h=D,"(\\d{2})";case"m":return c.m=D,"(\\d{1,2})";case"mm":return c.m=D,"(\\d{2})";case"s":return c.s=D,"(\\d{1,2})";case"ss":return c.s=D,"(\\d{2})";case"S":return c.S=D,"(\\d{1})";case"SS":return c.S=D,"(\\d{2})";case"SSS":return c.S=D,"(\\d{3})";case"A":return c.A=D,"(AM|PM)";case"a":return c.a=D,"(am|pm)";case"aa":return c.aa=D,"(a\\.m\\.|p\\.m\\.)";case"ddd":return s;case"dddd":return r;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return c.Z=D,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return c.ZZ=D,"(Z|[+-]\\d{2}\\d{2})";case"X":return c.X=D,"(-?\\d+)";case"x":return c.x=D,"(-?\\d{4,})";default:return D--,S[0]==="["&&(S=S.substring(1,S.length-1)),S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),h={map:c,regex:new RegExp("^"+k)};return yt[l]=h,h}function ua(e,a){return e!==void 0?e:a!==void 0?a.date:ya.date}function $t(e,a=""){const r=e>0?"-":"+",l=Math.abs(e),s=Math.floor(l/60),o=l%60;return r+V(s)+a+V(o)}function Le(e,a,r,l,s){const o={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(s!==void 0&&Object.assign(o,s),e==null||e===""||typeof e!="string")return o;a===void 0&&(a=la);const d=ua(r,Lt.props),c=d.months,D=d.monthsShort,{regex:k,map:h}=_n(a,d),S=e.match(k);if(S===null)return o;let K="";if(h.X!==void 0||h.x!==void 0){const W=parseInt(S[h.X!==void 0?h.X:h.x],10);if(isNaN(W)===!0||W<0)return o;const Q=new Date(W*(h.X!==void 0?1e3:1));o.year=Q.getFullYear(),o.month=Q.getMonth()+1,o.day=Q.getDate(),o.hour=Q.getHours(),o.minute=Q.getMinutes(),o.second=Q.getSeconds(),o.millisecond=Q.getMilliseconds()}else{if(h.YYYY!==void 0)o.year=parseInt(S[h.YYYY],10);else if(h.YY!==void 0){const W=parseInt(S[h.YY],10);o.year=W<0?W:2e3+W}if(h.M!==void 0){if(o.month=parseInt(S[h.M],10),o.month<1||o.month>12)return o}else h.MMM!==void 0?o.month=D.indexOf(S[h.MMM])+1:h.MMMM!==void 0&&(o.month=c.indexOf(S[h.MMMM])+1);if(h.D!==void 0){if(o.day=parseInt(S[h.D],10),o.year===null||o.month===null||o.day<1)return o;const W=l!=="persian"?new Date(o.year,o.month,0).getDate():tt(o.year,o.month);if(o.day>W)return o}h.H!==void 0?o.hour=parseInt(S[h.H],10)%24:h.h!==void 0&&(o.hour=parseInt(S[h.h],10)%12,(h.A&&S[h.A]==="PM"||h.a&&S[h.a]==="pm"||h.aa&&S[h.aa]==="p.m.")&&(o.hour+=12),o.hour=o.hour%24),h.m!==void 0&&(o.minute=parseInt(S[h.m],10)%60),h.s!==void 0&&(o.second=parseInt(S[h.s],10)%60),h.S!==void 0&&(o.millisecond=parseInt(S[h.S],10)*10**(3-S[h.S].length)),(h.Z!==void 0||h.ZZ!==void 0)&&(K=h.Z!==void 0?S[h.Z].replace(":",""):S[h.ZZ],o.timezoneOffset=(K[0]==="+"?-1:1)*(60*K.slice(1,3)+1*K.slice(3,5)))}return o.dateHash=V(o.year,6)+"/"+V(o.month)+"/"+V(o.day),o.timeHash=V(o.hour)+":"+V(o.minute)+":"+V(o.second)+K,o}function jt(e){const a=new Date(e.getFullYear(),e.getMonth(),e.getDate());a.setDate(a.getDate()-(a.getDay()+6)%7+3);const r=new Date(a.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);const l=a.getTimezoneOffset()-r.getTimezoneOffset();a.setHours(a.getHours()-l);const s=(a-r)/(ra*7);return 1+Math.floor(s)}function he(e,a,r){const l=new Date(e),s=`set${r===!0?"UTC":""}`;switch(a){case"year":case"years":l[`${s}Month`](0);case"month":case"months":l[`${s}Date`](1);case"day":case"days":case"date":l[`${s}Hours`](0);case"hour":case"hours":l[`${s}Minutes`](0);case"minute":case"minutes":l[`${s}Seconds`](0);case"second":case"seconds":l[`${s}Milliseconds`](0)}return l}function Je(e,a,r){return(e.getTime()-e.getTimezoneOffset()*bt-(a.getTime()-a.getTimezoneOffset()*bt))/r}function oa(e,a,r="days"){const l=new Date(e),s=new Date(a);switch(r){case"years":case"year":return l.getFullYear()-s.getFullYear();case"months":case"month":return(l.getFullYear()-s.getFullYear())*12+l.getMonth()-s.getMonth();case"days":case"day":case"date":return Je(he(l,"day"),he(s,"day"),ra);case"hours":case"hour":return Je(he(l,"hour"),he(s,"hour"),Dn);case"minutes":case"minute":return Je(he(l,"minute"),he(s,"minute"),bt);case"seconds":case"second":return Je(he(l,"second"),he(s,"second"),1e3)}}function At(e){return oa(e,he(e,"year"),"days")+1}function Nt(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Pt={YY(e,a,r){const l=this.YYYY(e,a,r)%100;return l>=0?V(l):"-"+V(Math.abs(l))},YYYY(e,a,r){return r!=null?r:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return V(e.getMonth()+1)},MMM(e,a){return a.monthsShort[e.getMonth()]},MMMM(e,a){return a.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return Nt(this.Q(e))},D(e){return e.getDate()},Do(e){return Nt(e.getDate())},DD(e){return V(e.getDate())},DDD(e){return At(e)},DDDD(e){return V(At(e),3)},d(e){return e.getDay()},dd(e,a){return this.dddd(e,a).slice(0,2)},ddd(e,a){return a.daysShort[e.getDay()]},dddd(e,a){return a.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return jt(e)},ww(e){return V(jt(e))},H(e){return e.getHours()},HH(e){return V(e.getHours())},h(e){const a=e.getHours();return a===0?12:a>12?a%12:a},hh(e){return V(this.h(e))},m(e){return e.getMinutes()},mm(e){return V(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return V(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return V(Math.floor(e.getMilliseconds()/10))},SSS(e){return V(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,a,r,l){const s=l==null?e.getTimezoneOffset():l;return $t(s,":")},ZZ(e,a,r,l){const s=l==null?e.getTimezoneOffset():l;return $t(s)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function ia(e,a,r,l,s){if(e!==0&&!e||e===1/0||e===-1/0)return;const o=new Date(e);if(isNaN(o))return;a===void 0&&(a=la);const d=ua(r,Lt.props);return a.replace(bn,(c,D)=>c in Pt?Pt[c](o,d,l,s):D===void 0?c:D.split("\\]").join("]"))}function Sn(e){wt(1,arguments);var a=at(e),r=a.getHours();return r}function kn(e){wt(1,arguments);var a=at(e),r=a.getMinutes();return r}function Ge(e,a){wt(2,arguments);var r=at(e),l=at(a);return r.getTime()>l.getTime()}const qn=["gregorian","persian"],sa={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>qn.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},da=["update:modelValue"];function ge(e){return e.year+"/"+V(e.month)+"/"+V(e.day)}function ca(e,a){const r=M(()=>e.disable!==!0&&e.readonly!==!0),l=M(()=>e.editable===!0?0:-1),s=M(()=>{const c=[];return e.color!==void 0&&c.push(`bg-${e.color}`),e.textColor!==void 0&&c.push(`text-${e.textColor}`),c.join(" ")});function o(){return e.locale!==void 0?{...a.lang.date,...e.locale}:a.lang.date}function d(c){const D=new Date,k=c===!0?null:0;if(e.calendar==="persian"){const h=hn(D);return{year:h.jy,month:h.jm,day:h.jd}}return{year:D.getFullYear(),month:D.getMonth()+1,day:D.getDate(),hour:k,minute:k,second:k,millisecond:k}}return{editable:r,tabindex:l,headerClass:s,getLocale:o,getCurrentDate:d}}const Ce=20,Cn=["Calendar","Years","Months"],Bt=e=>Cn.includes(e),Mt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),je=" \u2014 ";function De(e){return e.year+"/"+V(e.month)}var Yn=Ut({name:"QDate",props:{...sa,...Kt,...Rt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Mt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Mt},navigationMaxYearMonth:{type:String,validator:Mt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Bt}},emits:[...da,"range-start","range-end","navigation"],setup(e,{slots:a,emit:r}){const{proxy:l}=pt(),{$q:s}=l,o=Xt(e,s),{getCache:d}=Ha(),{tabindex:c,headerClass:D,getLocale:k,getCurrentDate:h}=ca(e,s);let S;const K=Wt(e),W=Jt(K),Q=X(null),te=X(Xe()),F=X(k()),ye=M(()=>Xe()),I=M(()=>k()),p=M(()=>h()),y=X(i(te.value,F.value)),R=X(e.defaultView),Me=s.lang.rtl===!0?"right":"left",w=X(Me.value),O=X(Me.value),$=y.value.year,x=X($-$%Ce-($<0?Ce:0)),C=X(null),ae=M(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(o.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),E=M(()=>e.color||"primary"),A=M(()=>e.textColor||"white"),J=M(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),se=M(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),Z=M(()=>se.value.filter(t=>typeof t=="string").map(t=>Ze(t,te.value,F.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),ce=M(()=>{const t=n=>Ze(n,te.value,F.value);return se.value.filter(n=>Ma(n)===!0&&n.from!==void 0&&n.to!==void 0).map(n=>({from:t(n.from),to:t(n.to)})).filter(n=>n.from.dateHash!==null&&n.to.dateHash!==null&&n.from.dateHash<n.to.dateHash)}),ve=M(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const n=Ft(t.year,t.month,t.day);return new Date(n.gy,n.gm-1,n.gd)}),He=M(()=>e.calendar==="persian"?ge:(t,n,u)=>ia(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),n===void 0?te.value:n,u===void 0?F.value:u,t.year,t.timezoneOffset)),fe=M(()=>Z.value.length+ce.value.reduce((t,n)=>t+1+oa(ve.value(n.to),ve.value(n.from)),0)),Ne=M(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(C.value!==null){const u=C.value.init,g=ve.value(u);return F.value.daysShort[g.getDay()]+", "+F.value.monthsShort[u.month-1]+" "+u.day+je+"?"}if(fe.value===0)return je;if(fe.value>1)return`${fe.value} ${F.value.pluralDay}`;const t=Z.value[0],n=ve.value(t);return isNaN(n.valueOf())===!0?je:F.value.headerTitle!==void 0?F.value.headerTitle(n,t):F.value.daysShort[n.getDay()]+", "+F.value.monthsShort[t.month-1]+" "+t.day}),Pe=M(()=>Z.value.concat(ce.value.map(n=>n.from)).sort((n,u)=>n.year-u.year||n.month-u.month)[0]),nt=M(()=>Z.value.concat(ce.value.map(n=>n.to)).sort((n,u)=>u.year-n.year||u.month-n.month)[0]),Ue=M(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(fe.value===0)return je;if(fe.value>1){const t=Pe.value,n=nt.value,u=F.value.monthsShort;return u[t.month-1]+(t.year!==n.year?" "+t.year+je+u[n.month-1]+" ":t.month!==n.month?je+u[n.month-1]:"")+" "+n.year}return Z.value[0].year}),pe=M(()=>{const t=[s.iconSet.datetime.arrowLeft,s.iconSet.datetime.arrowRight];return s.lang.rtl===!0?t.reverse():t}),Ie=M(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):F.value.firstDayOfWeek),rt=M(()=>{const t=F.value.daysShort,n=Ie.value;return n>0?t.slice(n,7).concat(t.slice(0,n)):t}),de=M(()=>{const t=y.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():tt(t.year,t.month)}),Ve=M(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),U=M(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),G=M(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Be=M(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return U.value!==null&&U.value.year>=y.value.year&&(t.year.prev=!1,U.value.year===y.value.year&&U.value.month>=y.value.month&&(t.month.prev=!1)),G.value!==null&&G.value.year<=y.value.year&&(t.year.next=!1,G.value.year===y.value.year&&G.value.month<=y.value.month&&(t.month.next=!1)),t}),Oe=M(()=>{const t={};return Z.value.forEach(n=>{const u=De(n);t[u]===void 0&&(t[u]=[]),t[u].push(n.day)}),t}),ze=M(()=>{const t={};return ce.value.forEach(n=>{const u=De(n.from),g=De(n.to);if(t[u]===void 0&&(t[u]=[]),t[u].push({from:n.from.day,to:u===g?n.to.day:void 0,range:n}),u<g){let m;const{year:T,month:b}=n.from,q=b<12?{year:T,month:b+1}:{year:T+1,month:1};for(;(m=De(q))<=g;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===g?n.to.day:void 0,range:n}),q.month++,q.month>12&&(q.year++,q.month=1)}}),t}),we=M(()=>{if(C.value===null)return;const{init:t,initHash:n,final:u,finalHash:g}=C.value,[m,T]=n<=g?[t,u]:[u,t],b=De(m),q=De(T);if(b!==ne.value&&q!==ne.value)return;const P={};return b===ne.value?(P.from=m.day,P.includeFrom=!0):P.from=1,q===ne.value?(P.to=T.day,P.includeTo=!0):P.to=de.value,P}),ne=M(()=>De(y.value)),lt=M(()=>{const t={};if(e.options===void 0){for(let u=1;u<=de.value;u++)t[u]=!0;return t}const n=typeof e.options=="function"?e.options:u=>e.options.includes(u);for(let u=1;u<=de.value;u++){const g=ne.value+"/"+V(u);t[u]=n(g)}return t}),xe=M(()=>{const t={};if(e.events===void 0)for(let n=1;n<=de.value;n++)t[n]=!1;else{const n=typeof e.events=="function"?e.events:u=>e.events.includes(u);for(let u=1;u<=de.value;u++){const g=ne.value+"/"+V(u);t[u]=n(g)===!0&&Ve.value(g)}}return t}),Te=M(()=>{let t,n;const{year:u,month:g}=y.value;if(e.calendar!=="persian")t=new Date(u,g-1,1),n=new Date(u,g-1,0).getDate();else{const m=Ft(u,g,1);t=new Date(m.gy,m.gm-1,m.gd);let T=g-1,b=u;T===0&&(T=12,b--),n=tt(b,T)}return{days:t.getDay()-Ie.value-1,endDay:n}}),_e=M(()=>{const t=[],{days:n,endDay:u}=Te.value,g=n<0?n+7:n;if(g<6)for(let b=u-g;b<=u;b++)t.push({i:b,fill:!0});const m=t.length;for(let b=1;b<=de.value;b++){const q={i:b,event:xe.value[b],classes:[]};lt.value[b]===!0&&(q.in=!0,q.flat=!0),t.push(q)}if(Oe.value[ne.value]!==void 0&&Oe.value[ne.value].forEach(b=>{const q=m+b-1;Object.assign(t[q],{selected:!0,unelevated:!0,flat:!1,color:E.value,textColor:A.value})}),ze.value[ne.value]!==void 0&&ze.value[ne.value].forEach(b=>{if(b.from!==void 0){const q=m+b.from-1,P=m+(b.to||de.value)-1;for(let dt=q;dt<=P;dt++)Object.assign(t[dt],{range:b.range,unelevated:!0,color:E.value,textColor:A.value});Object.assign(t[q],{rangeFrom:!0,flat:!1}),b.to!==void 0&&Object.assign(t[P],{rangeTo:!0,flat:!1})}else if(b.to!==void 0){const q=m+b.to-1;for(let P=m;P<=q;P++)Object.assign(t[P],{range:b.range,unelevated:!0,color:E.value,textColor:A.value});Object.assign(t[q],{flat:!1,rangeTo:!0})}else{const q=m+de.value-1;for(let P=m;P<=q;P++)Object.assign(t[P],{range:b.range,unelevated:!0,color:E.value,textColor:A.value})}}),we.value!==void 0){const b=m+we.value.from-1,q=m+we.value.to-1;for(let P=b;P<=q;P++)t[P].color=E.value,t[P].editRange=!0;we.value.includeFrom===!0&&(t[b].editRangeFrom=!0),we.value.includeTo===!0&&(t[q].editRangeTo=!0)}y.value.year===p.value.year&&y.value.month===p.value.month&&(t[m+p.value.day-1].today=!0);const T=t.length%7;if(T>0){const b=7-T;for(let q=1;q<=b;q++)t.push({i:q,fill:!0})}return t.forEach(b=>{let q="q-date__calendar-item ";b.fill===!0?q+="q-date__calendar-item--fill":(q+=`q-date__calendar-item--${b.in===!0?"in":"out"}`,b.range!==void 0&&(q+=` q-date__range${b.rangeTo===!0?"-to":b.rangeFrom===!0?"-from":""}`),b.editRange===!0&&(q+=` q-date__edit-range${b.editRangeFrom===!0?"-from":""}${b.editRangeTo===!0?"-to":""}`),(b.range!==void 0||b.editRange===!0)&&(q+=` text-${b.color}`)),b.classes=q}),t}),ut=M(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});me(()=>e.modelValue,t=>{if(S===t)S=0;else{const{year:n,month:u}=i(te.value,F.value);re(n,u)}}),me(R,()=>{Q.value!==null&&Q.value.focus()}),me(()=>y.value.year,t=>{r("navigation",{year:t,month:y.value.month})}),me(()=>y.value.month,t=>{r("navigation",{year:y.value.year,month:t})}),me(ye,t=>{qt(t,F.value,"mask"),te.value=t}),me(I,t=>{qt(te.value,t,"locale"),F.value=t});function Ee(){const t=p.value,n=Oe.value[De(t)];(n===void 0||n.includes(t.day)===!1)&&ot(t),ke(t.year,t.month)}function Re(t){Bt(t)===!0&&(R.value=t)}function Se(t,n){["month","year"].includes(t)&&(t==="month"?_:Y)(n===!0?-1:1)}function ke(t,n){R.value="Calendar",re(t,n)}function Qe(t,n){if(e.range===!1||!t){C.value=null;return}const u=Object.assign({...y.value},t),g=n!==void 0?Object.assign({...y.value},n):u;C.value={init:u,initHash:ge(u),final:g,finalHash:ge(g)},ke(u.year,u.month)}function Xe(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ze(t,n,u){return Le(t,n,u,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function i(t,n){const u=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(u.length===0)return v();const g=u[u.length-1],m=Ze(g.from!==void 0?g.from:g,t,n);return m.dateHash===null?v():m}function v(){let t,n;if(e.defaultYearMonth!==void 0){const u=e.defaultYearMonth.split("/");t=parseInt(u[0],10),n=parseInt(u[1],10)}else{const u=p.value!==void 0?p.value:h();t=u.year,n=u.month}return{year:t,month:n,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+V(n)+"/01"}}function _(t){let n=y.value.year,u=Number(y.value.month)+t;u===13?(u=1,n++):u===0&&(u=12,n--),re(n,u),J.value===!0&&Fe("month")}function Y(t){const n=Number(y.value.year)+t;re(n,y.value.month),J.value===!0&&Fe("year")}function N(t){re(t,y.value.month),R.value=e.defaultView==="Years"?"Months":"Calendar",J.value===!0&&Fe("year")}function oe(t){re(y.value.year,t),R.value="Calendar",J.value===!0&&Fe("month")}function H(t,n){const u=Oe.value[n];(u!==void 0&&u.includes(t.day)===!0?it:ot)(t)}function B(t){return{year:t.year,month:t.month,day:t.day}}function re(t,n){U.value!==null&&t<=U.value.year&&(t=U.value.year,n<U.value.month&&(n=U.value.month)),G.value!==null&&t>=G.value.year&&(t=G.value.year,n>G.value.month&&(n=G.value.month));const u=t+"/"+V(n)+"/01";u!==y.value.dateHash&&(w.value=y.value.dateHash<u==(s.lang.rtl!==!0)?"left":"right",t!==y.value.year&&(O.value=w.value),Dt(()=>{x.value=t-t%Ce-(t<0?Ce:0),Object.assign(y.value,{year:t,month:n,day:1,dateHash:u})}))}function Ke(t,n,u){const g=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;S=g;const{reason:m,details:T}=kt(n,u);r("update:modelValue",g,m,T)}function Fe(t){const n=Z.value[0]!==void 0&&Z.value[0].dateHash!==null?{...Z.value[0]}:{...y.value};Dt(()=>{n.year=y.value.year,n.month=y.value.month;const u=e.calendar!=="persian"?new Date(n.year,n.month,0).getDate():tt(n.year,n.month);n.day=Math.min(Math.max(1,n.day),u);const g=$e(n);S=g;const{details:m}=kt("",n);r("update:modelValue",g,t,m)})}function kt(t,n){return n.from!==void 0?{reason:`${t}-range`,details:{...B(n.target),from:B(n.from),to:B(n.to)}}:{reason:`${t}-day`,details:B(n)}}function $e(t,n,u){return t.from!==void 0?{from:He.value(t.from,n,u),to:He.value(t.to,n,u)}:He.value(t,n,u)}function ot(t){let n;if(e.multiple===!0)if(t.from!==void 0){const u=ge(t.from),g=ge(t.to),m=Z.value.filter(b=>b.dateHash<u||b.dateHash>g),T=ce.value.filter(({from:b,to:q})=>q.dateHash<u||b.dateHash>g);n=m.concat(T).concat(t).map(b=>$e(b))}else{const u=se.value.slice();u.push($e(t)),n=u}else n=$e(t);Ke(n,"add",t)}function it(t){if(e.noUnset===!0)return;let n=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const u=$e(t);t.from!==void 0?n=e.modelValue.filter(g=>g.from!==void 0?g.from!==u.from&&g.to!==u.to:!0):n=e.modelValue.filter(g=>g!==u),n.length===0&&(n=null)}Ke(n,"remove",t)}function qt(t,n,u){const g=Z.value.concat(ce.value).map(m=>$e(m,t,n)).filter(m=>m.from!==void 0?m.from.dateHash!==null&&m.to.dateHash!==null:m.dateHash!==null);r("update:modelValue",(e.multiple===!0?g:g[0])||null,u)}Object.assign(l,{setToday:Ee,setView:Re,offsetCalendar:Se,setCalendarTo:ke,setEditingRange:Qe});function va(){if(e.minimal!==!0)return f("div",{class:"q-date__header "+D.value},[f("div",{class:"relative-position"},[f(Ae,{name:"q-transition--fade"},()=>f("div",{key:"h-yr-"+Ue.value,class:"q-date__header-subtitle q-date__header-link "+(R.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...d("vY",{onClick(){R.value="Years"},onKeyup(t){t.keyCode===13&&(R.value="Years")}})},[Ue.value]))]),f("div",{class:"q-date__header-title relative-position flex no-wrap"},[f("div",{class:"relative-position col"},[f(Ae,{name:"q-transition--fade"},()=>f("div",{key:"h-sub"+Ne.value,class:"q-date__header-title-label q-date__header-link "+(R.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...d("vC",{onClick(){R.value="Calendar"},onKeyup(t){t.keyCode===13&&(R.value="Calendar")}})},[Ne.value]))]),e.todayBtn===!0?f(le,{class:"q-date__header-today self-start",icon:s.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:c.value,onClick:Ee}):null])])}function st({label:t,type:n,key:u,dir:g,goTo:m,boundaries:T,cls:b}){return[f("div",{class:"row items-center q-date__arrow"},[f(le,{round:!0,dense:!0,size:"sm",flat:!0,icon:pe.value[0],tabindex:c.value,disable:T.prev===!1,...d("go-#"+n,{onClick(){m(-1)}})})]),f("div",{class:"relative-position overflow-hidden flex flex-center"+b},[f(Ae,{name:"q-transition--jump-"+g},()=>f("div",{key:u},[f(le,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:c.value,...d("view#"+n,{onClick:()=>{R.value=n}})})]))]),f("div",{class:"row items-center q-date__arrow"},[f(le,{round:!0,dense:!0,size:"sm",flat:!0,icon:pe.value[1],tabindex:c.value,disable:T.next===!1,...d("go+#"+n,{onClick(){m(1)}})})])]}const fa={Calendar:()=>[f("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[f("div",{class:"q-date__navigation row items-center no-wrap"},st({label:F.value.months[y.value.month-1],type:"Months",key:y.value.month,dir:w.value,goTo:_,boundaries:Be.value.month,cls:" col"}).concat(st({label:y.value.year,type:"Years",key:y.value.year,dir:O.value,goTo:Y,boundaries:Be.value.year,cls:""}))),f("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},rt.value.map(t=>f("div",{class:"q-date__calendar-item"},[f("div",t)]))),f("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[f(Ae,{name:"q-transition--slide-"+w.value},()=>f("div",{key:ne.value,class:"q-date__calendar-days fit"},_e.value.map(t=>f("div",{class:t.classes},[t.in===!0?f(le,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:c.value,...d("day#"+t.i,{onClick:()=>{ma(t.i)},onMouseover:()=>{ha(t.i)}})},t.event!==!1?()=>f("div",{class:"q-date__event bg-"+t.event}):null):f("div",""+t.i)]))))])])],Months(){const t=y.value.year===p.value.year,n=g=>U.value!==null&&y.value.year===U.value.year&&U.value.month>g||G.value!==null&&y.value.year===G.value.year&&G.value.month<g,u=F.value.monthsShort.map((g,m)=>{const T=y.value.month===m+1;return f("div",{class:"q-date__months-item flex flex-center"},[f(le,{class:t===!0&&p.value.month===m+1?"q-date__today":null,flat:T!==!0,label:g,unelevated:T,color:T===!0?E.value:null,textColor:T===!0?A.value:null,tabindex:c.value,disable:n(m+1),...d("month#"+m,{onClick:()=>{oe(m+1)}})})])});return e.yearsInMonthView===!0&&u.unshift(f("div",{class:"row no-wrap full-width"},[st({label:y.value.year,type:"Years",key:y.value.year,dir:O.value,goTo:Y,boundaries:Be.value.year,cls:" col"})])),f("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},u)},Years(){const t=x.value,n=t+Ce,u=[],g=m=>U.value!==null&&U.value.year>m||G.value!==null&&G.value.year<m;for(let m=t;m<=n;m++){const T=y.value.year===m;u.push(f("div",{class:"q-date__years-item flex flex-center"},[f(le,{key:"yr"+m,class:p.value.year===m?"q-date__today":null,flat:!T,label:m,dense:!0,unelevated:T,color:T===!0?E.value:null,textColor:T===!0?A.value:null,tabindex:c.value,disable:g(m),...d("yr#"+m,{onClick:()=>{N(m)}})})]))}return f("div",{class:"q-date__view q-date__years flex flex-center"},[f("div",{class:"col-auto"},[f(le,{round:!0,dense:!0,flat:!0,icon:pe.value[0],tabindex:c.value,disable:g(t),...d("y-",{onClick:()=>{x.value-=Ce}})})]),f("div",{class:"q-date__years-content col self-stretch row items-center"},u),f("div",{class:"col-auto"},[f(le,{round:!0,dense:!0,flat:!0,icon:pe.value[1],tabindex:c.value,disable:g(n),...d("y+",{onClick:()=>{x.value+=Ce}})})])])}};function ma(t){const n={...y.value,day:t};if(e.range===!1){H(n,ne.value);return}if(C.value===null){const u=_e.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&u.range!==void 0){it({target:n,from:u.range.from,to:u.range.to});return}if(u.selected===!0){it(n);return}const g=ge(n);C.value={init:n,initHash:g,final:n,finalHash:g},r("range-start",B(n))}else{const u=C.value.initHash,g=ge(n),m=u<=g?{from:C.value.init,to:n}:{from:n,to:C.value.init};C.value=null,ot(u===g?n:{target:n,...m}),r("range-end",{from:B(m.from),to:B(m.to)})}}function ha(t){if(C.value!==null){const n={...y.value,day:t};Object.assign(C.value,{final:n,finalHash:ge(n)})}}return()=>{const t=[f("div",{class:"q-date__content col relative-position"},[f(Ae,{name:"q-transition--fade"},fa[R.value])])],n=zt(a.default);return n!==void 0&&t.push(f("div",{class:"q-date__actions"},n)),e.name!==void 0&&e.disable!==!0&&W(t,"push"),f("div",{class:ae.value,...ut.value},[va(),f("div",{ref:Q,class:"q-date__main col column",tabindex:-1},t)])}}});function Hn(e,a){if(e.hour!==null){if(e.minute===null)return"minute";if(a===!0&&e.second===null)return"second"}return"hour"}function In(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}var Et=Ut({name:"QTime",props:{...Rt,...Kt,...sa,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:da,setup(e,{slots:a,emit:r}){const{proxy:{$q:l}}=pt(),s=Xt(e,l),{tabindex:o,headerClass:d,getLocale:c,getCurrentDate:D}=ca(e,l),k=Wt(e),h=Jt(k);let S,K;const W=X(null),Q=M(()=>nt()),te=M(()=>c()),F=M(()=>Ue()),ye=Le(e.modelValue,Q.value,te.value,e.calendar,F.value),I=X(Hn(ye)),p=X(ye),y=X(ye.hour===null||ye.hour<12),R=M(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(s.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),Me=M(()=>{const i=p.value;return{hour:i.hour===null?"--":w.value===!0?V(i.hour):String(y.value===!0?i.hour===0?12:i.hour:i.hour>12?i.hour-12:i.hour),minute:i.minute===null?"--":V(i.minute),second:i.second===null?"--":V(i.second)}}),w=M(()=>e.format24h!==null?e.format24h:l.lang.date.format24h),O=M(()=>{const i=I.value==="hour",v=i===!0?12:60,_=p.value[I.value];let N=`rotate(${Math.round(_*(360/v))-180}deg) translateX(-50%)`;return i===!0&&w.value===!0&&p.value.hour>=12&&(N+=" scale(.7)"),{transform:N}}),$=M(()=>p.value.hour!==null),x=M(()=>$.value===!0&&p.value.minute!==null),C=M(()=>e.hourOptions!==void 0?i=>e.hourOptions.includes(i):e.options!==void 0?i=>e.options(i,null,null):null),ae=M(()=>e.minuteOptions!==void 0?i=>e.minuteOptions.includes(i):e.options!==void 0?i=>e.options(p.value.hour,i,null):null),E=M(()=>e.secondOptions!==void 0?i=>e.secondOptions.includes(i):e.options!==void 0?i=>e.options(p.value.hour,p.value.minute,i):null),A=M(()=>{if(C.value===null)return null;const i=fe(0,11,C.value),v=fe(12,11,C.value);return{am:i,pm:v,values:i.values.concat(v.values)}}),J=M(()=>ae.value!==null?fe(0,59,ae.value):null),se=M(()=>E.value!==null?fe(0,59,E.value):null),Z=M(()=>{switch(I.value){case"hour":return A.value;case"minute":return J.value;case"second":return se.value}}),ce=M(()=>{let i,v,_=0,Y=1;const N=Z.value!==null?Z.value.values:void 0;I.value==="hour"?w.value===!0?(i=0,v=23):(i=0,v=11,y.value===!1&&(_=12)):(i=0,v=55,Y=5);const oe=[];for(let H=i,B=i;H<=v;H+=Y,B++){const re=H+_,Ke=N!==void 0&&N.includes(re)===!1,Fe=I.value==="hour"&&H===0?w.value===!0?"00":"12":H;oe.push({val:re,index:B,disable:Ke,label:Fe})}return oe}),ve=M(()=>[[Va,rt,void 0,{stop:!0,prevent:!0,mouse:!0}]]);me(()=>e.modelValue,i=>{const v=Le(i,Q.value,te.value,e.calendar,F.value);(v.dateHash!==p.value.dateHash||v.timeHash!==p.value.timeHash)&&(p.value=v,v.hour===null?I.value="hour":y.value=v.hour<12)}),me([Q,te],()=>{Dt(()=>{ke()})});function He(){const i={...D(),...In()};ke(i),Object.assign(p.value,i),I.value="hour"}function fe(i,v,_){const Y=Array.apply(null,{length:v+1}).map((N,oe)=>{const H=oe+i;return{index:H,val:_(H)===!0}}).filter(N=>N.val===!0).map(N=>N.index);return{min:Y[0],max:Y[Y.length-1],values:Y,threshold:v+1}}function Ne(i,v,_){const Y=Math.abs(i-v);return Math.min(Y,_-Y)}function Pe(i,{min:v,max:_,values:Y,threshold:N}){if(i===v)return v;if(i<v||i>_)return Ne(i,v,N)<=Ne(i,_,N)?v:_;const oe=Y.findIndex(re=>i<=re),H=Y[oe-1],B=Y[oe];return i-H<=B-i?H:B}function nt(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function Ue(){if(typeof e.defaultDate!="string"){const i=D(!0);return i.dateHash=ge(i),i}return Le(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function pe(){return Qe.isDeactivated===!0||Qe.isUnmounted===!0||Z.value!==null&&(Z.value.values.length===0||I.value==="hour"&&w.value!==!0&&A.value[y.value===!0?"am":"pm"].values.length===0)}function Ie(){const i=W.value,{top:v,left:_,width:Y}=i.getBoundingClientRect(),N=Y/2;return{top:v+N,left:_+N,dist:N*.7}}function rt(i){if(pe()!==!0){if(i.isFirst===!0){S=Ie(),K=Ve(i.evt,S);return}K=Ve(i.evt,S,K),i.isFinal===!0&&(S=!1,K=null,de())}}function de(){I.value==="hour"?I.value="minute":e.withSeconds&&I.value==="minute"&&(I.value="second")}function Ve(i,v,_){const Y=pa(i),N=Math.abs(Y.top-v.top),oe=Math.sqrt(Math.pow(Math.abs(Y.top-v.top),2)+Math.pow(Math.abs(Y.left-v.left),2));let H,B=Math.asin(N/oe)*(180/Math.PI);if(Y.top<v.top?B=v.left<Y.left?90-B:270+B:B=v.left<Y.left?B+90:270-B,I.value==="hour"){if(H=B/30,A.value!==null){const re=w.value!==!0?y.value===!0:A.value.am.values.length>0&&A.value.pm.values.length>0?oe>=v.dist:A.value.am.values.length>0;H=Pe(H+(re===!0?0:12),A.value[re===!0?"am":"pm"])}else H=Math.round(H),w.value===!0?oe<v.dist?H<12&&(H+=12):H===12&&(H=0):y.value===!0&&H===12?H=0:y.value===!1&&H!==12&&(H+=12);w.value===!0&&(y.value=H<12)}else H=Math.round(B/6)%60,I.value==="minute"&&J.value!==null?H=Pe(H,J.value):I.value==="second"&&se.value!==null&&(H=Pe(H,se.value));return _!==H&&ut[I.value](H),H}const U={hour(){I.value="hour"},minute(){I.value="minute"},second(){I.value="second"}};function G(i){i.keyCode===13&&Ee()}function Be(i){i.keyCode===13&&Re()}function Oe(i){pe()!==!0&&(l.platform.is.desktop!==!0&&Ve(i,Ie()),de())}function ze(i){pe()!==!0&&Ve(i,Ie())}function we(i){if(i.keyCode===13)I.value="hour";else if([37,39].includes(i.keyCode)){const v=i.keyCode===37?-1:1;if(A.value!==null){const _=w.value===!0?A.value.values:A.value[y.value===!0?"am":"pm"].values;if(_.length===0)return;if(p.value.hour===null)xe(_[0]);else{const Y=(_.length+_.indexOf(p.value.hour)+v)%_.length;xe(_[Y])}}else{const _=w.value===!0?24:12,Y=w.value!==!0&&y.value===!1?12:0,N=p.value.hour===null?-v:p.value.hour;xe(Y+(24+N+v)%_)}}}function ne(i){if(i.keyCode===13)I.value="minute";else if([37,39].includes(i.keyCode)){const v=i.keyCode===37?-1:1;if(J.value!==null){const _=J.value.values;if(_.length===0)return;if(p.value.minute===null)Te(_[0]);else{const Y=(_.length+_.indexOf(p.value.minute)+v)%_.length;Te(_[Y])}}else{const _=p.value.minute===null?-v:p.value.minute;Te((60+_+v)%60)}}}function lt(i){if(i.keyCode===13)I.value="second";else if([37,39].includes(i.keyCode)){const v=i.keyCode===37?-1:1;if(se.value!==null){const _=se.value.values;if(_.length===0)return;if(p.value.seconds===null)_e(_[0]);else{const Y=(_.length+_.indexOf(p.value.second)+v)%_.length;_e(_[Y])}}else{const _=p.value.second===null?-v:p.value.second;_e((60+_+v)%60)}}}function xe(i){p.value.hour!==i&&(p.value.hour=i,Se())}function Te(i){p.value.minute!==i&&(p.value.minute=i,Se())}function _e(i){p.value.second!==i&&(p.value.second=i,Se())}const ut={hour:xe,minute:Te,second:_e};function Ee(){y.value===!1&&(y.value=!0,p.value.hour!==null&&(p.value.hour-=12,Se()))}function Re(){y.value===!0&&(y.value=!1,p.value.hour!==null&&(p.value.hour+=12,Se()))}function Se(){if(C.value!==null&&C.value(p.value.hour)!==!0){p.value=Le(),I.value="hour";return}if(ae.value!==null&&ae.value(p.value.minute)!==!0){p.value.minute=null,p.value.second=null,I.value="minute";return}if(e.withSeconds===!0&&E.value!==null&&E.value(p.value.second)!==!0){p.value.second=null,I.value="second";return}p.value.hour===null||p.value.minute===null||e.withSeconds===!0&&p.value.second===null||ke()}function ke(i){const v=Object.assign({...p.value},i),_=e.calendar==="persian"?V(v.hour)+":"+V(v.minute)+(e.withSeconds===!0?":"+V(v.second):""):ia(new Date(v.year,v.month===null?null:v.month-1,v.day,v.hour,v.minute,v.second,v.millisecond),Q.value,te.value,v.year,v.timezoneOffset);v.changed=_!==e.modelValue,r("update:modelValue",_,v)}const Qe=pt();Object.assign(Qe.proxy,{setNow:He});function Xe(){const i=[f("div",{class:"q-time__link "+(I.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:o.value,onClick:U.hour,onKeyup:we},Me.value.hour),f("div",":"),f("div",$.value===!0?{class:"q-time__link "+(I.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:o.value,onKeyup:ne,onClick:U.minute}:{class:"q-time__link"},Me.value.minute)];e.withSeconds===!0&&i.push(f("div",":"),f("div",x.value===!0?{class:"q-time__link "+(I.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:o.value,onKeyup:lt,onClick:U.second}:{class:"q-time__link"},Me.value.second));const v=[f("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},i)];return w.value===!1&&v.push(f("div",{class:"q-time__header-ampm column items-between no-wrap"},[f("div",{class:"q-time__link "+(y.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:o.value,onClick:Ee,onKeyup:G},"AM"),f("div",{class:"q-time__link "+(y.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:o.value,onClick:Re,onKeyup:Be},"PM")])),f("div",{class:"q-time__header flex flex-center no-wrap "+d.value},v)}function Ze(){const i=p.value[I.value];return f("div",{class:"q-time__content col relative-position"},[f(Ae,{name:"q-transition--scale"},()=>f("div",{key:"clock"+I.value,class:"q-time__container-parent absolute-full"},[f("div",{ref:W,class:"q-time__container-child fit overflow-hidden"},[et(f("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Oe,onMousedown:ze},[f("div",{class:"q-time__clock-circle fit"},[f("div",{class:"q-time__clock-pointer"+(p.value[I.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:O.value}),ce.value.map(v=>f("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${v.index}`+(v.val===i?" q-time__clock-position--active "+d.value:v.disable===!0?" q-time__clock-position--disable":"")},[f("span",v.label)]))])]),ve.value)])])),e.nowBtn===!0?f(le,{class:"q-time__now-button absolute",icon:l.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:o.value,onClick:He}):null])}return()=>{const i=[Ze()],v=zt(a.default);return v!==void 0&&i.push(f("div",{class:"q-time__actions"},v)),e.name!==void 0&&e.disable!==!0&&h(i,"push"),f("div",{class:R.value,tabindex:-1},[Xe(),f("div",{class:"q-time__main col overflow-auto"},i)])}}});const Vn=ba({name:Ct.createSchedule,setup(){const{t:e}=ja(),a=X(),{getPractices:r,practices:l,create:s}=Aa(),o=Ca(),d=M(()=>l.data);wa(()=>{r()});const c=M(()=>[...d.value].sort((w,O)=>w.from-O.from)),D=M(()=>{const w={};return c.value.forEach(({from:O,to:$})=>{let x=O,C=We(x);for(;Ge($,x)||ht($,x);){const ae=Sn(x),E=kn(x);w[C]||(w[C]={}),w[C][ae]||(w[C][ae]=new Set),w[C][ae].add(E),x=qe(x,{minutes:1}),C=We(x)}}),w}),k=X(We(new Date)),h=X(""),S=X(""),K=M(()=>!Yt(k.value)),W=M(()=>!Ht(h.value)),Q=({hours:w})=>{var O,$,x;return((x=($=(O=D.value)==null?void 0:O[k.value])==null?void 0:$[w])==null?void 0:x.size)!==60},te=({hours:w})=>w>8&&w<21,F=({hours:w,minutes:O})=>{var x,C;return typeof O!="number"||!((C=(x=D.value)==null?void 0:x[k.value])==null?void 0:C[w])?!0:!D.value[k.value][w].has(O)},ye=({hours:w,minutes:O})=>{const $=typeof O=="number",[x,C]=h.value.split(":"),ae=qe(new Date(k.value),{hours:x,minutes:$&&C}),E=qe(new Date(k.value),{hours:w,minutes:O}),A=Ge(E,ae),J=ht(E,ae);return $?A:A||J},I=({hours:w,minutes:O})=>{const $=typeof O=="number",[x,C]=h.value.split(":"),ae=qe(new Date(k.value),{hours:x,minutes:$&&C}),E=c.value.filter(({from:ve})=>We(ve)===k.value);if(E.length===0)return!0;const[A]=E.filter(({from:ve})=>Ge(new Date(ve),ae)),J=A==null?void 0:A.from;if(!J)return!0;const se=qe(new Date(k.value),{hours:w,minutes:O}),Z=Ge(J,se),ce=ht(J,se);return $?Z:Z||ce};function p(w,O){const $=w===null?w:Number(w),x=O===null?O:Number(O);return Tt([te,Q,F])({hours:$,minutes:x})}function y(w,O){const $=w===null?w:Number(w),x=O===null?O:Number(O);return Tt([te,Q,F,ye,I])({hours:$,minutes:x})}function R(){a.value.validate().then(w=>{if(w){const[O,$]=h.value.split(":"),[x,C]=S.value.split(":");s({from:qe(new Date(k.value),{hours:O,minutes:$}),to:qe(new Date(k.value),{hours:x,minutes:C})}).then(()=>o.push({name:Ct.schedule}))}})}me(()=>h.value,()=>{S.value=""}),me(()=>k.value,()=>{h.value=""});function Me(w){w&&(S.value="")}return{t:e,getIsTimeStringValid:Ht,getIsDateStringValid:Yt,addScheduledPractice:R,handleTimeStartModalOpen:Me,getAvailableDates:Oa,getMinYearMonth:xa,getMaxYearMonth:Ta,localeUa:Fa,formRef:a,date:k,timeStart:h,timeFinish:S,getTimeStartOptions:p,getTimeFinishOptions:y,scheduled:d,scheduledSorted:c,scheduledTime:D,timeStarthInputDisabled:K,timeFinishInputDisabled:W,practices:l}}}),On={class:"row items-center justify-end"},xn={class:"row items-center justify-end"},Tn={class:"row items-center justify-end"};function Fn(e,a,r,l,s,o){return _a(),Sa($a,{class:"flex"},{default:ee(()=>[z(Ya,{class:"full-width q-px-lg"},{default:ee(()=>[z(Ia,{ref:"formRef",class:"q-gutter-md full-width"},{default:ee(()=>[z(mt,{filled:"",class:"full-width",label:e.t("date"),modelValue:e.date,"onUpdate:modelValue":a[1]||(a[1]=d=>e.date=d),rules:[d=>!d||e.getIsDateStringValid(d)],mask:"date",hint:e.t("date-hint")},{append:ee(()=>[z(ct,{name:"event",class:"cursor-pointer"},{default:ee(()=>[z(ft,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:ee(()=>[z(Yn,{"today-btn":"","no-unset":"",modelValue:e.date,"onUpdate:modelValue":a[0]||(a[0]=d=>e.date=d),options:e.getAvailableDates(),"navigation-min-year-month":e.getMinYearMonth(),"navigation-max-year-month":e.getMaxYearMonth(),locale:e.localeUa},{default:ee(()=>[vt("div",On,[et(z(le,{label:e.t("choose"),color:"primary",flat:""},null,8,["label"]),[[gt]])])]),_:1},8,["modelValue","options","navigation-min-year-month","navigation-max-year-month","locale"])]),_:1})]),_:1})]),_:1},8,["label","modelValue","rules","hint"]),z(mt,{class:"full-width",label:e.t("from"),filled:"",modelValue:e.timeStart,"onUpdate:modelValue":a[3]||(a[3]=d=>e.timeStart=d),disable:e.timeStarthInputDisabled,hint:e.timeStarthInputDisabled?e.t("time-start-hint"):"",rules:[d=>!d||e.getIsTimeStringValid(d),d=>!d||e.getTimeStartOptions(...d.split(":"))],mask:"time"},{append:ee(()=>[z(ct,{name:"access_time",class:"cursor-pointer"},{default:ee(()=>[z(ft,{cover:"","transition-show":"scale","transition-hide":"scale","onUpdate:modelValue":e.handleTimeStartModalOpen},{default:ee(()=>[z(Et,{format24h:"",modelValue:e.timeStart,"onUpdate:modelValue":a[2]||(a[2]=d=>e.timeStart=d),options:e.getTimeStartOptions},{default:ee(()=>[vt("div",xn,[et(z(le,{label:e.t("choose"),color:"primary",flat:""},null,8,["label"]),[[gt]])])]),_:1},8,["modelValue","options"])]),_:1},8,["onUpdate:modelValue"])]),_:1})]),_:1},8,["label","modelValue","disable","hint","rules"]),z(mt,{class:"full-width",label:e.t("to"),filled:"",modelValue:e.timeFinish,"onUpdate:modelValue":a[5]||(a[5]=d=>e.timeFinish=d),mask:"time",rules:[d=>!d||e.getIsTimeStringValid(d),d=>!d||e.getTimeFinishOptions(...d.split(":"))],disable:e.timeFinishInputDisabled,hint:e.timeFinishInputDisabled?e.t("time-finish-hint"):""},{append:ee(()=>[z(ct,{name:"access_time",class:"cursor-pointer"},{default:ee(()=>[z(ft,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:ee(()=>[z(Et,{format24h:"",modelValue:e.timeFinish,"onUpdate:modelValue":a[4]||(a[4]=d=>e.timeFinish=d),options:e.getTimeFinishOptions},{default:ee(()=>[vt("div",Tn,[et(z(le,{label:e.t("choose"),color:"primary",flat:""},null,8,["label"]),[[gt]])])]),_:1},8,["modelValue","options"])]),_:1})]),_:1})]),_:1},8,["label","modelValue","rules","disable","hint"])]),_:1},512),z(le,{class:"q-mt-lg",color:"primary",loading:e.practices.loading,disable:!e.getIsTimeStringValid(e.timeStart)||!e.getIsTimeStringValid(e.timeFinish),onClick:e.addScheduledPractice},{default:ee(()=>[ka(qa(e.t("submit-practice-form")),1)]),_:1},8,["loading","disable","onClick"])]),_:1})]),_:1})}var zn=Da(Vn,[["render",Fn]]);export{zn as default};
