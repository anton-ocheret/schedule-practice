import{Q as b,a as R}from"./QCard.0f1d9e08.js";import{Q as S}from"./QPageContainer.bca18837.js";import{v as I,a as h,Q as C}from"./index.27a39792.js";import{Q as T,a as p}from"./QForm.7f455822.js";import{r as k,u as E,k as d,l as V,m as v,_ as q,n as w,p as Q,q as r,f as s,Q as N,s as B,t as f,v as z,x as c,y as g}from"./index.946ad941.js";import{u as $}from"./vue-i18n.runtime.esm-bundler.fe6c5ac9.js";import{u as F}from"./use-auth.f3f3937b.js";import"./focus-manager.41046903.js";function L(){const{t:e}=$(),a=k(),i=E(),{login:u}=F(),l=d({login:e("login"),email:e("email"),password:e("password"),requiredError:e("required-error"),invalidError:e("invalid-error")}),t=d({email:"",password:""}),o=d({loading:!1,error:!1}),m=n=>I(n)||l.requiredError;return{formRequestState:o,formTranslations:l,formValues:t,formRules:{email:[m,n=>h(n)||l.invalidError],password:[m]},bindRef:n=>{a.value=n},submit:async()=>{if(await a.value.validate()){const{email:_,password:y}=t;o.loading=!0,u({email:_,password:y}).then(()=>{i.push({name:V.schedule})}).catch(()=>{o.error=!0}).finally(()=>{o.loading=!1})}}}}const P=v({name:"login-form",setup(){const{formRequestState:e,formTranslations:a,formValues:i,formRules:u,bindRef:l,submit:t}=L();return{formRequestState:e,formTranslations:a,formValues:i,formRules:u,bindRef:l,submit:t}}}),U={class:"flex self-center"};function A(e,a,i,u,l,t){return w(),Q(R,null,{default:r(()=>[s(b,null,{default:r(()=>[s(T,{ref:e.bindRef,class:"q-gutter-sm column",onSubmit:e.submit},{default:r(()=>[s(p,{"lazy-rules":"",outlined:"",disable:e.formRequestState.loading,label:e.formTranslations.email,modelValue:e.formValues.email,"onUpdate:modelValue":a[0]||(a[0]=o=>e.formValues.email=o),rules:e.formRules.email},null,8,["disable","label","modelValue","rules"]),s(p,{"lazy-rules":"",outlined:"",type:"password",disable:e.formRequestState.loading,label:e.formTranslations.password,modelValue:e.formValues.password,"onUpdate:modelValue":a[1]||(a[1]=o=>e.formValues.password=o),rules:e.formRules.password},null,8,["disable","label","modelValue","rules"]),s(N,{loading:e.formRequestState.loading,class:"flex self-center",type:"submit",color:"primary"},{default:r(()=>[B("span",U,f(e.formTranslations.login),1),s(z,{class:"q-ml-sm flex self-center",size:"xs",name:"login"})]),_:1},8,["loading"])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var D=q(P,[["render",A]]);const j=v({name:V.login,components:{LoginForm:D},setup(){const{t:e}=$();return{t:e}}});function G(e,a,i,u,l,t){const o=g("login-form"),m=g("router-link");return w(),Q(C,{class:"flex"},{default:r(()=>[s(S,{class:"full-width q-px-lg"},{default:r(()=>[s(o),s(R,{class:"q-mt-lg"},{default:r(()=>[s(b,null,{default:r(()=>[c(f(e.t("no-account")+"?")+" ",1),s(m,{to:{name:e.$constants.routeNames.register}},{default:r(()=>[c(f(e.t("register")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:1})]),_:1})}var ae=q(j,[["render",G]]);export{ae as default};
